<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LogicPals - The AI Tutor That Teaches HOW to Think</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        :root { --primary: #4F46E5; --primary-dark: #4338CA; --accent: #F59E0B; --text: #1F2937; --bg: #F9FAFB; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Nunito', sans-serif; color: var(--text); background: var(--bg); line-height: 1.6; }

        /* --- NAVBAR --- */
        nav { display: flex; justify-content: space-between; align-items: center; padding: 20px 5%; background: white; box-shadow: 0 2px 10px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 100; }
        .logo { font-weight: 800; color: var(--primary); font-size: 24px; display: flex; align-items: center; gap: 8px; }
        .nav-btn { background: transparent; border: 2px solid var(--primary); color: var(--primary); padding: 8px 20px; border-radius: 50px; font-weight: 700; cursor: pointer; transition: 0.2s; }
        .nav-btn:hover { background: var(--primary); color: white; }

        /* --- HERO SECTION (The Hook) --- */
        .hero { display: flex; flex-direction: column; align-items: center; text-align: center; padding: 60px 20px; background: linear-gradient(135deg, #EFF6FF 0%, #DBEAFE 100%); }
        h1 { font-size: 3rem; font-weight: 800; color: #111827; margin-bottom: 20px; line-height: 1.2; }
        .subtitle { font-size: 1.2rem; color: #4B5563; max-width: 600px; margin-bottom: 40px; }
        
        .mystery-card { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); max-width: 500px; width: 100%; text-align: left; position: relative; border-left: 5px solid var(--accent); margin-bottom: 40px; transition: transform 0.3s; cursor: pointer; }
        .mystery-card:hover { transform: translateY(-5px); }
        .mystery-tag { background: #FEF3C7; color: #D97706; font-weight: 800; font-size: 12px; padding: 4px 10px; border-radius: 20px; display: inline-block; margin-bottom: 15px; }
        .mystery-text { font-size: 1.2rem; font-weight: 700; color: #1F2937; margin-bottom: 20px; }
        .cta-link { color: var(--primary); font-weight: 700; text-decoration: none; display: flex; align-items: center; gap: 5px; }

        .hero-cta { background: var(--primary); color: white; padding: 16px 40px; border-radius: 50px; font-size: 1.2rem; font-weight: 800; border: none; cursor: pointer; box-shadow: 0 10px 25px rgba(79, 70, 229, 0.4); transition: 0.2s; }
        .hero-cta:hover { transform: scale(1.05); background: var(--primary-dark); }
        .sub-cta { font-size: 0.9rem; color: #6B7280; margin-top: 10px; }

        /* --- SOCIAL PROOF --- */
        .proof-section { padding: 60px 20px; background: white; text-align: center; }
        .section-title { font-size: 2rem; font-weight: 800; margin-bottom: 40px; }
        .testimonials { display: flex; gap: 30px; justify-content: center; flex-wrap: wrap; }
        .review-card { background: #F9FAFB; padding: 25px; border-radius: 15px; max-width: 350px; text-align: left; border: 1px solid #E5E7EB; }
        .review-text { font-size: 1.1rem; font-style: italic; color: #374151; margin-bottom: 15px; }
        .reviewer { font-weight: 700; color: var(--primary); font-size: 0.9rem; }

        /* --- FOUNDER STORY --- */
        .founder-section { padding: 60px 20px; background: #1F2937; color: white; display: flex; justify-content: center; }
        .story-container { max-width: 700px; text-align: center; }
        .story-title { font-size: 2rem; margin-bottom: 30px; color: var(--accent); }
        .story-text { font-size: 1.1rem; line-height: 1.8; color: #D1D5DB; margin-bottom: 30px; text-align: left; }
        .signature { font-weight: 800; font-size: 1.2rem; color: white; }

        /* --- MODAL (Signup Form) --- */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); backdrop-filter: blur(5px); z-index: 200; justify-content: center; align-items: center; opacity: 0; transition: opacity 0.3s; }
        .modal-overlay.active { display: flex; opacity: 1; }
        .auth-modal { background: white; padding: 40px; border-radius: 20px; width: 90%; max-width: 400px; position: relative; box-shadow: 0 20px 50px rgba(0,0,0,0.2); transform: translateY(20px); transition: transform 0.3s; }
        .modal-overlay.active .auth-modal { transform: translateY(0); }
        .close-btn { position: absolute; top: 15px; right: 20px; font-size: 24px; cursor: pointer; color: #9CA3AF; }
        
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 700; font-size: 0.9rem; color: #374151; }
        .form-group input { width: 100%; padding: 12px; border: 2px solid #E5E7EB; border-radius: 10px; font-size: 16px; outline: none; transition: 0.2s; }
        .form-group input:focus { border-color: var(--primary); }
        
        .submit-btn { width: 100%; background: var(--primary); color: white; padding: 14px; border: none; border-radius: 10px; font-weight: 800; font-size: 1.1rem; cursor: pointer; transition: 0.2s; }
        .submit-btn:hover { background: var(--primary-dark); }
        .toggle-text { text-align: center; margin-top: 15px; font-size: 0.9rem; color: #6B7280; }
        .toggle-link { color: var(--primary); font-weight: 700; cursor: pointer; text-decoration: underline; }
        .error-msg { color: #DC2626; font-size: 0.9rem; margin-bottom: 15px; display: none; text-align: center; }

    </style>
</head>
<body>

    <nav>
        <div class="logo">üß† LogicPals</div>
        <button class="nav-btn" onclick="openModal('login')">Login</button>
    </nav>

    <section class="hero">
        <h1>Don't Teach Them WHAT to Think.<br>Teach Them <span style="color:var(--primary)">HOW</span> to Think.</h1>
        <div class="subtitle">The AI Tutor that uses the Socratic Method to build critical thinking, not just memorize answers.</div>

        <div class="mystery-card" onclick="openModal('signup')">
            <span class="mystery-tag">TRY THIS MYSTERY</span>
            <div class="mystery-text">"I am an odd number. Take away a letter and I become even. What number am I?"</div>
            <div class="cta-link">Click to ask the AI Tutor ‚Üí</div>
        </div>

        <button class="hero-cta" onclick="openModal('signup')">Start Free Trial ‚Üí</button>
        <div class="sub-cta">Takes 30 seconds. No credit card needed.</div>
    </section>

    <section class="proof-section">
        <div class="section-title">What Parents Are Saying ‚ù§Ô∏è</div>
        <div class="testimonials">
            <div class="review-card">
                <div class="review-text">"My son asked to do 'one more mystery' before bed. That's NEVER happened with math homework!"</div>
                <div class="reviewer">- Ayesha, Mother of 9-year-old</div>
            </div>
            <div class="review-card">
                <div class="review-text">"The AI is more patient than me! It guides him without giving the answer. Amazing."</div>
                <div class="reviewer">- Karim, Father of 11-year-old</div>
            </div>
        </div>
    </section>

    <section class="founder-section">
        <div class="story-container">
            <div class="story-title">Why I Built LogicPals üß†</div>
            <div class="story-text">
                "As a parent, I watched my child memorize formulas perfectly but panic when exam questions changed slightly.<br><br>
                I realized: Schools teach <b>WHAT</b> to think, not <b>HOW</b> to think.<br><br>
                So I built LogicPals - an AI tutor that never gives answers, only asks questions that guide children to discover solutions themselves.<br>
                That's the Socratic Method. And it works."
            </div>
            <div class="signature">- Tasbi, Founder</div>
        </div>
    </section>

    <div class="modal-overlay" id="authModal">
        <div class="auth-modal">
            <span class="close-btn" onclick="closeModal()">√ó</span>
            <h2 id="modalTitle" style="text-align: center; margin-bottom: 20px; color: var(--primary);">Start Free Trial</h2>
            <div id="errorMsg" class="error-msg">Error message here</div>
            
            <form id="authForm" onsubmit="handleAuth(event)">
                <div class="form-group">
                    <label>Parent Email</label>
                    <input type="email" id="email" required placeholder="name@example.com">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="password" required placeholder="At least 6 characters">
                </div>
                <div class="form-group" id="nameField">
                    <label>Child's Name</label>
                    <input type="text" id="childName" placeholder="e.g. Ayan">
                </div>

                <button type="submit" class="submit-btn" id="submitBtn">Start Learning üöÄ</button>
            </form>

            <div class="toggle-text">
                <span id="toggleText">Already have an account?</span>
                <span class="toggle-link" onclick="toggleMode()">Login here</span>
            </div>
        </div>
    </div>

    <script>
        // --- CONFIGURATION ---
        const supabaseUrl = 'https://ovszuxerimbmzfblzkgd.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im92c3p1eGVyaW1ibXpmYmx6a2dkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ1MDA4MzgsImV4cCI6MjA4MDA3NjgzOH0.cmMF8OsC8J_B-t0aBldiMqv4XiNZtJWSGMqg8At9V14';
        const supabase = supabase.createClient(supabaseUrl, supabaseKey);

        let isSignup = true;

        // UI FUNCTIONS
        function openModal(mode) {
            const modal = document.getElementById('authModal');
            modal.classList.add('active');
            isSignup = (mode === 'signup');
            updateModalUI();
        }

        function closeModal() {
            document.getElementById('authModal').classList.remove('active');
        }

        function toggleMode() {
            isSignup = !isSignup;
            updateModalUI();
        }

        function updateModalUI() {
            document.getElementById('modalTitle').innerText = isSignup ? "Start Free Trial" : "Welcome Back";
            document.getElementById('submitBtn').innerText = isSignup ? "Start Learning üöÄ" : "Login";
            document.getElementById('nameField').style.display = isSignup ? "block" : "none";
            document.getElementById('toggleText').innerText = isSignup ? "Already have an account?" : "New to LogicPals?";
            document.querySelector('.toggle-link').innerText = isSignup ? "Login here" : "Sign up free";
            document.getElementById('errorMsg').style.display = 'none';
        }

        // AUTH LOGIC
        async function handleAuth(e) {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const childName = document.getElementById('childName').value;
            const btn = document.getElementById('submitBtn');
            const errorDiv = document.getElementById('errorMsg');

            btn.innerText = "Processing...";
            btn.disabled = true;
            errorDiv.style.display = 'none';

            try {
                if (isSignup) {
                    // 1. SIGN UP
                    const { data, error } = await supabase.auth.signUp({
                        email: email,
                        password: password,
                    });
                    if (error) throw error;

                    // 2. CREATE PROFILE (Step 1 Data)
                    if (data.user) {
                        const { error: profileError } = await supabase
                            .from('children')
                            .insert([{ parent_id: data.user.id, name: childName, age: 0, school: '' }]); // Placeholders for Step 2
                        
                        if (profileError) console.error("Profile creation failed", profileError);
                    }
                    
                    alert("Account created! Logging you in...");
                    window.location.href = 'learn.html'; // Go directly to puzzle (Step 2 happens there)

                } else {
                    // LOGIN
                    const { data, error } = await supabase.auth.signInWithPassword({
                        email: email,
                        password: password,
                    });
                    if (error) throw error;
                    window.location.href = 'dashboard.html';
                }
            } catch (err) {
                errorDiv.innerText = err.message;
                errorDiv.style.display = 'block';
                btn.innerText = isSignup ? "Start Learning üöÄ" : "Login";
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>